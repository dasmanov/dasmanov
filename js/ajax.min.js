var url_ajax="/dasmanov/ajax.php",ajax_class_load="loading",class_ajax_container="ajax_container",ajax_div_container="."+class_ajax_container,div_btn_ajax=ajax_div_container+" a.ajax_btn",class_for_ajax_container=".for_ajax_container",ajax_class_key_up=".execute_on_key_up",ajax_class_change=".execute_on_change",ajax_class_click=".execute_on_click";(ajax_div_container=$(ajax_div_container)).length&&ajax_div_container.each(function(){var a=$(this),t="";$.each(a.data(),function(a,s){t.length>0&&(t+="&"),t+=a+"="+s}),t.length>0&&(t+="&json=1",a.addClass(ajax_class_load),$.post(url_ajax,t,function(t){a.html(t.html),a.removeClass(ajax_class_load)},"json").fail(function(t,s,o){window.console&&console.log(s),a.removeClass(ajax_class_load),a&&(jqXHRStatusCode=t.statusCode(),window.console&&console.log(jqXHRStatusCode.responseText),a.html("Ошибка: "+jqXHRStatusCode.status+" ("+jqXHRStatusCode.statusText+")"))}))}),$(document).on("click",div_btn_ajax,function(a){a.preventDefault();var t=$(this);if(!t.hasClass(ajax_class_load)){var s=$(this).closest(ajax_div_container);t.addClass(ajax_class_load);var o="",e={};$.each(t.data(),function(a,t){e[a]=t,o.length>0&&(o+="&"),o+=a+"="+t}),$.each(s.data(),function(a,t){e.hasOwnProperty(a)||(o.length>0&&(o+="&"),o+=a+"="+t)}),o.length>0&&(o+="&json=1",s.addClass(ajax_class_load),$.post(url_ajax,o,function(a){s.html(a.html),s.removeClass(ajax_class_load)},"json").fail(function(a,o,e){t.removeClass(ajax_class_load),window.console&&console.log(o),s.removeClass(ajax_class_load),s&&(jqXHRStatusCode=a.statusCode(),window.console&&console.log(jqXHRStatusCode.responseText),s.html("Ошибка: "+jqXHRStatusCode.status+" ("+jqXHRStatusCode.statusText+")"))}))}}),$(document).on("click",class_for_ajax_container+ajax_class_click,function(a){a.preventDefault();var t=$(this);if(!t.hasClass(ajax_class_load)){var s="",o=null;$.each(t.data(),function(a,t){s.length>0&&(s+="&"),"ajax_container"==a&&(o=$(t)),s+=a+"="+t}),o&&o.length&&(t.addClass(ajax_class_load),s.length>0&&(s+="&json=1",o.addClass(ajax_class_load),$.post(url_ajax,s,function(a){o.html(a.html),o.removeClass(ajax_class_load)},"json").fail(function(a,s,e){t.removeClass(ajax_class_load),window.console&&console.log(s),o.removeClass(ajax_class_load),o&&(jqXHRStatusCode=a.statusCode(),window.console&&console.log(jqXHRStatusCode.responseText),o.html("Ошибка: "+jqXHRStatusCode.status+" ("+jqXHRStatusCode.statusText+")"))})))}});var ajax_timeout_id=null;$(document).on("keyup",class_for_ajax_container+ajax_class_key_up,function(a){a.preventDefault();var t=$(this),s=t.attr("name"),o=t.val();if(ajax_timeout_id&&clearTimeout(ajax_timeout_id),t.attr("data-"+s)&&o==t.attr("data-"+s))return!1;ajax_timeout_id=setTimeout(function(){var a="",e=null,n={};t.attr("data-"+s,o).data(s,o),$.each(t.data(),function(t,s){n[t]=s,"ajax_container"==t?e=$(s):(a.length>0&&(a+="&"),a+=t+"="+s)}),e&&(e.attr("data-"+s,o).data(s,o),$.each(e.data(),function(t,s){n.hasOwnProperty(t)||(a.length>0&&(a+="&"),a+=t+"="+s)}),a.length>0&&(a+="&json=1",e.addClass(ajax_class_load),$.post(url_ajax,a,function(a){e.html(a.html),e.removeClass(ajax_class_load)},"json").fail(function(a,t,s){window.console&&console.log(t),e.removeClass(ajax_class_load),e&&(jqXHRStatusCode=a.statusCode(),window.console&&console.log(jqXHRStatusCode.responseText),e.html("Ошибка: "+jqXHRStatusCode.status+" ("+jqXHRStatusCode.statusText+")"))})))},900)}),$(document).on("change",class_for_ajax_container+ajax_class_change,function(a){a.preventDefault();var t=$(this),s=t.attr("name"),o=t.val();if(t.attr("data-"+s)&&o==t.attr("data-"+s))return!1;var e="",n=null,l={};t.attr("data-"+s,o).data(s,o),$.each(t.data(),function(a,t){l[a]=t,"ajax_container"==a?n=$(t):(e.length>0&&(e+="&"),e+=a+"="+t)}),n||(n=t.closest(ajax_div_container)),n&&(n.attr("data-"+s,o).data(s,o),$.each(n.data(),function(a,t){l.hasOwnProperty(a)||(e.length>0&&(e+="&"),e+=a+"="+t)}),e.length>0&&(e+="&json=1",n.addClass(ajax_class_load),$.post(url_ajax,e,function(a){n.html(a.html),n.removeClass(ajax_class_load)},"json").fail(function(a,t,s){window.console&&console.log(t),n.removeClass(ajax_class_load),n&&(jqXHRStatusCode=a.statusCode(),window.console&&console.log(jqXHRStatusCode.responseText),n.html("Ошибка: "+jqXHRStatusCode.status+" ("+jqXHRStatusCode.statusText+")"))})))});